<div class="p-4 bg-white border rounded-lg shadow-sm">

  <!-- Amount input -->
  <div class="mb-4">
    <label class="block text-sm font-medium mb-1">Amount (USD)</label>
    <input
      type="number"
      [(ngModel)]="amount"
      min="1"
      placeholder="Enter donation amount"
      class="w-full border rounded-md px-3 py-2 focus:ring-2 focus:ring-green-600"
    />
  </div>

  <!-- Saved Cards -->
  <div class="mb-4">
    <label class="block text-sm font-medium mb-2">Choose a saved card</label>

    <div *ngIf="savedCards.length === 0" class="text-gray-500 text-sm">
      No saved cards available.
    </div>

    <div *ngFor="let card of savedCards" class="flex items-center gap-3 mb-2">
      <input
        type="radio"
        name="cardSelect"
        [value]="card.id"
        [(ngModel)]="selectedCard"
        class="h-4 w-4"
      />

      <div>
        <p class="font-medium">
          {{ card.card.brand | titlecase }} •••• {{ card.card.last4 }}
        </p>
        <p class="text-xs text-gray-600">
          Expires {{ card.card.exp_month }}/{{ card.card.exp_year }}
        </p>
      </div>
    </div>
  </div>

  <!-- Donate Button -->
  <button
    (click)="donate()"
    [disabled]="loading"
    class="w-full bg-green-700 hover:bg-green-800 text-white font-medium py-2 rounded-lg transition"
  >
    <span *ngIf="!loading">Donate</span>
    <span *ngIf="loading" class="flex items-center justify-center gap-2">
      <svg
        class="animate-spin h-5 w-5 text-white"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
      >
        <circle
          class="opacity-25"
          cx="12"
          cy="12"
          r="10"
          stroke="currentColor"
          stroke-width="4"
        ></circle>
        <path
          class="opacity-75"
          fill="currentColor"
          d="M4 12a8 8 0 018-8v8z"
        ></path>
      </svg>
      Processing...
    </span>
  </button>

  <!-- Messages -->
  <p *ngIf="message" class="text-green-700 mt-3 text-sm font-medium">
    {{ message }}
  </p>
  <p *ngIf="error" class="text-red-600 mt-3 text-sm font-medium">
    {{ error }}
  </p>

</div>
